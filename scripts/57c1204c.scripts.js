"use strict";angular.module("bergerCountdownApp",["ngSanitize","ngRoute","timer","ngLadda"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).service("bcNotifications",["$window",function(a){var b=function(b){var c=new a.Notification("Lampe Berger",{body:b});c.onclick=function(){this.close()}};this.notify=function(c){if("Notification"in a){var d=a.Notification.permission;"default"===d?a.Notification.requestPermission(function(a){"granted"===a&&b(c)}):"granted"===d&&b(c)}else console.log("No notification API support.")}}]),angular.module("bergerCountdownApp").controller("MainCtrl",["$scope","$interval","bcNotifications",function(a,b,c){a.label="Light my fire",a.icon="fire",a.progress=0,a.btnClass="success";var d;a.nextAction="waitForBlow",a.$watch("progress",function(b){100===b&&(a.btnClass="danger",a.progress=0,"waitForBlow"===a.nextAction?(a.label="Blow it!",a.nextAction="releasingParfume",c.notify("Blow your lamp!")):"releasingParfume"===a.nextAction&&(a.label="Cap it!",a.nextAction="waitForCap",c.notify("Cap your lamp!")))}),a.next=function(c){if(a.nextAction=c,a.progress=0,"waitForBlow"===c)d=120;else{if("releasingParfume"!==c)return"waitForCap"===c?(a.btnClass="success",a.label="Enjoy!",void(a.nextAction="done")):void 0;a.btnClass="info",a.label="Let it release.",d=1200}var e=d/100*1e3;b(function(){a.progress+=1},e,100)}}]);